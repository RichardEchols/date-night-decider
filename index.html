<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Night Decider üíë</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨üçï</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #e94560, #ff6b6b, #ffa502, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 30px;
            border: 2px solid transparent;
            background: rgba(255, 255, 255, 0.1);
            color: #a0a0a0;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .tab-btn.active[data-tab="movie"] {
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            color: #fff;
            border-color: #e94560;
        }

        .tab-btn.active[data-tab="dinner"] {
            background: linear-gradient(135deg, #ffa502, #ff7f50);
            color: #fff;
            border-color: #ffa502;
        }

        .tab-btn.active[data-tab="datenight"] {
            background: linear-gradient(135deg, #9c27b0, #e040fb);
            color: #fff;
            border-color: #9c27b0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Filter Section */
        .filter-section {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .filter-btn {
            padding: 12px 24px;
            border: 2px solid #e94560;
            background: transparent;
            color: #e94560;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #e94560;
            color: #fff;
        }

        .dinner-filter .filter-btn {
            border-color: #ffa502;
            color: #ffa502;
        }

        .dinner-filter .filter-btn:hover, .dinner-filter .filter-btn.active {
            background: #ffa502;
            color: #fff;
        }

        .datenight-filter .filter-btn {
            border-color: #9c27b0;
            color: #e040fb;
        }

        .datenight-filter .filter-btn:hover, .datenight-filter .filter-btn.active {
            background: #9c27b0;
            color: #fff;
        }

        /* Spin Button */
        .spin-container {
            text-align: center;
            margin-bottom: 40px;
        }

        .spin-btn {
            padding: 20px 60px;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
        }

        .spin-btn.dinner-spin {
            background: linear-gradient(135deg, #ffa502, #ff7f50);
            box-shadow: 0 10px 30px rgba(255, 165, 2, 0.4);
        }

        .spin-btn.datenight-spin {
            background: linear-gradient(135deg, #9c27b0, #e040fb);
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.4);
        }

        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(233, 69, 96, 0.6);
        }

        .spin-btn.dinner-spin:hover {
            box-shadow: 0 15px 40px rgba(255, 165, 2, 0.6);
        }

        .spin-btn.datenight-spin:hover {
            box-shadow: 0 15px 40px rgba(156, 39, 176, 0.6);
        }

        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .spin-btn.spinning {
            animation: pulse 0.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Cards */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 0.5s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card h3 {
            font-size: 1.4rem;
            color: #e94560;
            margin-bottom: 8px;
        }

        .dinner-card h3 {
            color: #ffa502;
        }

        .datenight-card h3 {
            color: #e040fb;
        }

        .card-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .tag {
            background: rgba(233, 69, 96, 0.2);
            color: #ff6b6b;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .dinner-card .tag {
            background: rgba(255, 165, 2, 0.2);
            color: #ffa502;
        }

        .datenight-card .tag {
            background: rgba(156, 39, 176, 0.2);
            color: #e040fb;
        }

        .card p {
            color: #c0c0c0;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .card-link {
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .trailer-link {
            background: #ff0000;
            color: white;
        }

        .trailer-link:hover {
            background: #cc0000;
        }

        .stream-link {
            background: #0db8de;
            color: white;
        }

        .stream-link:hover {
            background: #0a9bbf;
        }

        .recipe-link {
            background: #4CAF50;
            color: white;
        }

        .recipe-link:hover {
            background: #45a049;
        }

        .order-link {
            background: #9c27b0;
            color: white;
        }

        .order-link:hover {
            background: #7b1fa2;
        }

        .groupon-link {
            background: linear-gradient(135deg, #53a318, #7cc33f);
            color: white;
        }

        .groupon-link:hover {
            background: linear-gradient(135deg, #448214, #6ab32f);
        }

        .pick-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            cursor: pointer;
        }

        .pick-btn:hover {
            background: linear-gradient(135deg, #45a049, #3d8b40);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(233, 69, 96, 0.3);
        }

        .dinner-section .section-header {
            border-bottom-color: rgba(255, 165, 2, 0.3);
        }

        .datenight-section .section-header {
            border-bottom-color: rgba(156, 39, 176, 0.3);
        }

        .section-header h2 {
            color: #e94560;
        }

        .dinner-section .section-header h2 {
            color: #ffa502;
        }

        .datenight-section .section-header h2 {
            color: #e040fb;
        }

        .clear-btn {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #e94560;
            color: #e94560;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .dinner-section .clear-btn {
            border-color: #ffa502;
            color: #ffa502;
        }

        .datenight-section .clear-btn {
            border-color: #9c27b0;
            color: #e040fb;
        }

        .clear-btn:hover {
            background: #e94560;
            color: white;
        }

        .dinner-section .clear-btn:hover {
            background: #ffa502;
        }

        .datenight-section .clear-btn:hover {
            background: #9c27b0;
        }

        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 40px;
        }

        .history-item {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remove-history {
            background: none;
            border: none;
            color: #81c784;
            cursor: pointer;
            font-size: 1rem;
        }

        .remove-history:hover {
            color: #ff6b6b;
        }

        /* Add Form */
        .add-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 40px;
        }

        .add-section h2 {
            color: #e94560;
            margin-bottom: 20px;
        }

        .dinner-section .add-section h2 {
            color: #ffa502;
        }

        .datenight-section .add-section h2 {
            color: #e040fb;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #e94560;
        }

        .dinner-section .form-group input:focus, .dinner-section .form-group textarea:focus {
            border-color: #ffa502;
        }

        .datenight-section .form-group input:focus, .datenight-section .form-group textarea:focus {
            border-color: #9c27b0;
        }

        .add-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .dinner-section .add-btn {
            background: linear-gradient(135deg, #ffa502, #ff7f50);
        }

        .datenight-section .add-btn {
            background: linear-gradient(135deg, #9c27b0, #e040fb);
        }

        .add-btn:hover {
            transform: scale(1.05);
        }

        /* Stats */
        .stats {
            text-align: center;
            color: #a0a0a0;
            margin-bottom: 20px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #a0a0a0;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        /* Toggle */
        .toggle-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #a0a0a0;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            margin-left: 10px;
        }

        .toggle-btn:hover {
            border-color: #e94560;
            color: #e94560;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .spin-btn {
                padding: 15px 40px;
                font-size: 1.2rem;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .tab-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        /* Effort badges */
        .effort-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .effort-easy {
            background: rgba(76, 175, 80, 0.3);
            color: #81c784;
        }

        .effort-medium {
            background: rgba(255, 193, 7, 0.3);
            color: #ffd54f;
        }

        .effort-involved {
            background: rgba(233, 69, 96, 0.3);
            color: #ff6b6b;
        }

        .cook-vs-order {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .cook-vs-order button {
            padding: 10px 25px;
            border: 2px solid #ffa502;
            background: transparent;
            color: #ffa502;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cook-vs-order button.active,
        .cook-vs-order button:hover {
            background: #ffa502;
            color: #fff;
        }

        /* Date Night Specific Styles */
        .date-plan-card {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(224, 64, 251, 0.05));
            border: 2px solid rgba(156, 39, 176, 0.3);
        }

        .date-plan-card h3 {
            color: #e040fb;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .date-plan-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
        }

        .date-plan-section h4 {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-plan-section p {
            margin-bottom: 10px;
        }

        .price-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            margin-left: 10px;
        }

        .price-free {
            background: rgba(76, 175, 80, 0.3);
            color: #81c784;
        }

        .price-budget {
            background: rgba(33, 150, 243, 0.3);
            color: #64b5f6;
        }

        .price-moderate {
            background: rgba(255, 193, 7, 0.3);
            color: #ffd54f;
        }

        .price-splurge {
            background: rgba(233, 69, 96, 0.3);
            color: #ff6b6b;
        }

        .groupon-banner {
            background: linear-gradient(135deg, #53a318, #7cc33f);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .groupon-banner a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .groupon-banner a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üíë Date Night Decider</h1>
            <p>Richard & Wife's Ultimate Night Out (or In) Planner</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="movie">üé¨ Movie Night</button>
            <button class="tab-btn" data-tab="dinner">üçΩÔ∏è What's for Dinner?</button>
            <button class="tab-btn" data-tab="datenight">üíë Date Night Out</button>
        </div>

        <!-- ==================== MOVIE TAB ==================== -->
        <div class="tab-content active" id="movieTab">
            <div class="filter-section">
                <button class="filter-btn active" data-filter="all">All Movies</button>
                <button class="filter-btn" data-filter="thriller">Thriller</button>
                <button class="filter-btn" data-filter="action">Action</button>
                <button class="filter-btn" data-filter="horror">Horror</button>
                <button class="filter-btn" data-filter="romance">Romance</button>
                <button class="filter-btn" data-filter="classic">70s/80s Classics</button>
                <button class="filter-btn" data-filter="documentary">Documentary</button>
                <button class="filter-btn" data-filter="scifi">Sci-Fi/Aliens</button>
            </div>

            <div class="stats">
                <span id="movieCount">0</span> movies available | <span id="watchedCount">0</span> watched
            </div>

            <div class="spin-container">
                <button class="spin-btn" id="spinMovieBtn">üé∞ Spin for 3 Movies!</button>
            </div>

            <div class="results-grid" id="movieResults"></div>

            <div class="section-header">
                <h2>‚úÖ Watched Movies</h2>
                <div>
                    <button class="clear-btn" id="clearMovieHistory">Clear All</button>
                    <button class="toggle-btn" id="toggleMovieHistory">Hide</button>
                </div>
            </div>
            <div class="history-list" id="watchedList"></div>

            <div class="add-section">
                <h2>‚ûï Add a Movie</h2>
                <form id="addMovieForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Movie Title *</label>
                            <input type="text" id="movieTitle" required placeholder="e.g., The Matrix">
                        </div>
                        <div class="form-group">
                            <label>Year</label>
                            <input type="number" id="movieYear" placeholder="e.g., 1999">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Genres (comma separated) *</label>
                            <input type="text" id="movieGenres" required placeholder="e.g., Action, Sci-Fi, Thriller">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Synopsis *</label>
                            <textarea id="movieSynopsis" required placeholder="Brief description of the movie..."></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>YouTube Trailer URL</label>
                            <input type="url" id="movieTrailer" placeholder="https://youtube.com/watch?v=...">
                        </div>
                    </div>
                    <button type="submit" class="add-btn">Add Movie</button>
                </form>
            </div>
        </div>

        <!-- ==================== DINNER TAB ==================== -->
        <div class="tab-content dinner-section" id="dinnerTab">
            <div class="cook-vs-order">
                <button class="active" data-mode="all">üç¥ All Options</button>
                <button data-mode="cook">üë®‚Äçüç≥ Cook at Home</button>
                <button data-mode="order">üì± Order In / Go Out</button>
            </div>

            <div class="filter-section dinner-filter">
                <button class="filter-btn active" data-filter="all">All Food</button>
                <button class="filter-btn" data-filter="quick">Quick & Easy</button>
                <button class="filter-btn" data-filter="comfort">Comfort Food</button>
                <button class="filter-btn" data-filter="healthy">Healthy</button>
                <button class="filter-btn" data-filter="mexican">Mexican</button>
                <button class="filter-btn" data-filter="asian">Asian</button>
                <button class="filter-btn" data-filter="italian">Italian</button>
                <button class="filter-btn" data-filter="american">American</button>
                <button class="filter-btn" data-filter="soul">Soul Food</button>
            </div>

            <div class="stats">
                <span id="dinnerCount">0</span> dinner options available | <span id="eatenCount">0</span> recently had
            </div>

            <div class="spin-container">
                <button class="spin-btn dinner-spin" id="spinDinnerBtn">üé∞ Spin for 3 Dinner Ideas!</button>
            </div>

            <div class="results-grid" id="dinnerResults"></div>

            <div class="section-header">
                <h2>üçΩÔ∏è Recently Had</h2>
                <div>
                    <button class="clear-btn" id="clearDinnerHistory">Clear All</button>
                    <button class="toggle-btn" id="toggleDinnerHistory">Hide</button>
                </div>
            </div>
            <div class="history-list" id="eatenList"></div>

            <div class="add-section">
                <h2>‚ûï Add a Dinner Option</h2>
                <form id="addDinnerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Dish Name *</label>
                            <input type="text" id="dinnerName" required placeholder="e.g., Chicken Alfredo">
                        </div>
                        <div class="form-group">
                            <label>Type</label>
                            <select id="dinnerType">
                                <option value="cook">Cook at Home</option>
                                <option value="order">Order In / Go Out</option>
                                <option value="both">Either</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Cuisine / Tags (comma separated) *</label>
                            <input type="text" id="dinnerTags" required placeholder="e.g., Italian, Comfort Food, Quick">
                        </div>
                        <div class="form-group">
                            <label>Effort Level</label>
                            <select id="dinnerEffort">
                                <option value="easy">Easy (under 30 min)</option>
                                <option value="medium">Medium (30-60 min)</option>
                                <option value="involved">Involved (60+ min)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="dinnerDesc" placeholder="What makes this dish special..."></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Recipe URL (optional)</label>
                            <input type="url" id="dinnerRecipe" placeholder="https://...">
                        </div>
                    </div>
                    <button type="submit" class="add-btn">Add Dinner Option</button>
                </form>
            </div>
        </div>

        <!-- ==================== DATE NIGHT TAB ==================== -->
        <div class="tab-content datenight-section" id="datenightTab">
            <div class="groupon-banner">
                <a href="https://www.groupon.com/local/things-to-do" target="_blank">üé´ Browse All Groupon Deals for Activities</a>
                &nbsp;|&nbsp;
                <a href="https://www.groupon.com/local/food-and-drink" target="_blank">üç¥ Browse All Food & Drink Deals</a>
            </div>

            <div class="filter-section datenight-filter">
                <button class="filter-btn active" data-filter="all">All Dates</button>
                <button class="filter-btn" data-filter="active">Active/Adventure</button>
                <button class="filter-btn" data-filter="chill">Chill & Relaxed</button>
                <button class="filter-btn" data-filter="romantic">Romantic</button>
                <button class="filter-btn" data-filter="fun">Fun & Games</button>
                <button class="filter-btn" data-filter="cultural">Cultural</button>
                <button class="filter-btn" data-filter="free">Free/Cheap</button>
            </div>

            <div class="stats">
                <span id="dateCount">0</span> date ideas available | <span id="doneCount">0</span> dates completed
            </div>

            <div class="spin-container">
                <button class="spin-btn datenight-spin" id="spinDateBtn">üé∞ Plan Our Date Night!</button>
            </div>

            <div class="results-grid" id="dateResults"></div>

            <div class="section-header">
                <h2>üíï Recent Dates</h2>
                <div>
                    <button class="clear-btn" id="clearDateHistory">Clear All</button>
                    <button class="toggle-btn" id="toggleDateHistory">Hide</button>
                </div>
            </div>
            <div class="history-list" id="dateList"></div>

            <div class="add-section">
                <h2>‚ûï Add a Date Idea</h2>
                <form id="addDateForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Activity Name *</label>
                            <input type="text" id="dateName" required placeholder="e.g., Escape Room">
                        </div>
                        <div class="form-group">
                            <label>Price Range</label>
                            <select id="datePrice">
                                <option value="free">Free</option>
                                <option value="budget">Budget ($1-30)</option>
                                <option value="moderate">Moderate ($30-75)</option>
                                <option value="splurge">Splurge ($75+)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tags (comma separated) *</label>
                            <input type="text" id="dateTags" required placeholder="e.g., Active, Fun, Indoor">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="dateDesc" placeholder="What makes this date idea great..."></textarea>
                        </div>
                    </div>
                    <button type="submit" class="add-btn">Add Date Idea</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ==================== MOVIE DATA ====================
        let movies = [
            { id: 1, title: "Escape From New York", year: 1981, genres: ["Action", "Thriller", "Classic"], synopsis: "In a dystopian future, the entire island of Manhattan has become a maximum-security prison. When the President's plane crashes there, a legendary war hero turned criminal is offered his freedom if he can rescue the Commander-in-Chief within 24 hours.", trailer: "https://www.youtube.com/watch?v=R4LFY4CYhJk", justwatch: "https://www.justwatch.com/us/movie/escape-from-new-york" },
            { id: 2, title: "Apocalypse Now", year: 1979, genres: ["Action", "Classic"], synopsis: "During the Vietnam War, Captain Willard is sent on a dangerous mission up the Nung River into Cambodia to assassinate a renegade Green Beret Colonel who has set himself up as a god among a local tribe.", trailer: "https://www.youtube.com/watch?v=FTjG-Aux_yQ", justwatch: "https://www.justwatch.com/us/movie/apocalypse-now" },
            { id: 3, title: "True Lies", year: 1994, genres: ["Action", "Thriller"], synopsis: "Harry Tasker leads a double life as a spy for a top-secret government agency while his wife believes he's a boring computer salesman. When she gets tangled up with a used-car salesman posing as a spy, Harry's two worlds hilariously and dangerously collide.", trailer: "https://www.youtube.com/watch?v=3B6wnmN8Pbk", justwatch: "https://www.justwatch.com/us/movie/true-lies" },
            { id: 4, title: "The Bodyguard", year: 1992, genres: ["Thriller", "Romance"], synopsis: "A former Secret Service agent turned bodyguard is hired to protect a famous pop singer from a stalker. Despite their clashing personalities, an unexpected romance develops as the threats against her life intensify.", trailer: "https://www.youtube.com/watch?v=_8FqOW-3Xos", justwatch: "https://www.justwatch.com/us/movie/the-bodyguard" },
            { id: 5, title: "Good Will Hunting", year: 1997, genres: ["Drama", "Thriller"], synopsis: "A young janitor at MIT has a gift for mathematics but needs help from a psychologist to find direction in his life. A powerful story about genius, trauma, friendship, and the courage to embrace one's potential.", trailer: "https://www.youtube.com/watch?v=PaZVjZEFkRs", justwatch: "https://www.justwatch.com/us/movie/good-will-hunting" },
            { id: 6, title: "The Fugitive", year: 1993, genres: ["Action", "Thriller"], synopsis: "A Chicago doctor, wrongfully convicted of murdering his wife, escapes from custody and becomes a fugitive. While being relentlessly pursued by a determined U.S. Marshal, he races to find the real killer and prove his innocence.", trailer: "https://www.youtube.com/watch?v=imWnuirIy8o", justwatch: "https://www.justwatch.com/us/movie/the-fugitive" },
            { id: 7, title: "El Norte", year: 1983, genres: ["Drama", "Thriller"], synopsis: "A Guatemalan brother and sister flee persecution in their homeland and make a perilous journey through Mexico to reach 'El Norte' - the United States. A heartbreaking portrayal of the immigrant experience.", trailer: "https://www.youtube.com/watch?v=kkfMPNqS4HQ", justwatch: "https://www.justwatch.com/us/movie/el-norte" },
            { id: 8, title: "Shutter Island", year: 2010, genres: ["Thriller", "Horror"], synopsis: "In 1954, U.S. Marshals investigate the disappearance of a patient from a hospital for the criminally insane on a remote island. As a hurricane traps them there, disturbing secrets surface and nothing is what it seems.", trailer: "https://www.youtube.com/watch?v=5iaYLCiq5RM", justwatch: "https://www.justwatch.com/us/movie/shutter-island" },
            { id: 9, title: "The Giver", year: 2014, genres: ["Thriller", "Sci-Fi"], synopsis: "In a seemingly perfect community without war, pain, or suffering, a young man is chosen to learn from an elderly man about the true pain and pleasure of the 'real' world.", trailer: "https://www.youtube.com/watch?v=xvp6FnYbRoU", justwatch: "https://www.justwatch.com/us/movie/the-giver" },
            { id: 10, title: "Attack the Block", year: 2011, genres: ["Action", "Thriller", "Sci-Fi", "Horror"], synopsis: "A teen gang in South London defends their block from an alien invasion on Bonfire Night. What starts as petty crime turns into an epic battle for survival.", trailer: "https://www.youtube.com/watch?v=cD0gm7dHKKc", justwatch: "https://www.justwatch.com/us/movie/attack-the-block" },
            { id: 11, title: "Inside Man", year: 2006, genres: ["Thriller", "Action"], synopsis: "A detective matches wits with a bank robber whose heist becomes a hostage situation that's more elaborate than it appears. Buried secrets threaten powerful people.", trailer: "https://www.youtube.com/watch?v=gs7YLdkN3KE", justwatch: "https://www.justwatch.com/us/movie/inside-man" },
            { id: 12, title: "Annihilation", year: 2018, genres: ["Thriller", "Sci-Fi", "Horror"], synopsis: "A biologist leads an expedition into an environmental disaster zone where the laws of nature don't apply. Mind-bending phenomena threaten their sanity.", trailer: "https://www.youtube.com/watch?v=89OP78l9oF0", justwatch: "https://www.justwatch.com/us/movie/annihilation-2018" },
            { id: 13, title: "Cujo", year: 1983, genres: ["Thriller", "Horror", "Classic"], synopsis: "A friendly Saint Bernard is bitten by a rabid bat and turns into a killer. A mother and her young son become trapped in their stalled car by the rabid dog.", trailer: "https://www.youtube.com/watch?v=Fdff1pBhlBM", justwatch: "https://www.justwatch.com/us/movie/cujo" },
            { id: 14, title: "Open Water", year: 2003, genres: ["Thriller", "Horror"], synopsis: "Based on true events, a couple on a scuba diving trip surfaces to find their tour boat has left them stranded in shark-infested waters.", trailer: "https://www.youtube.com/watch?v=19lJdmK9MV0", justwatch: "https://www.justwatch.com/us/movie/open-water" },
            { id: 15, title: "Misery", year: 1990, genres: ["Thriller", "Horror"], synopsis: "A famous author is rescued by his 'number one fan' and taken to her remote cabin to recover. But her obsession turns deadly.", trailer: "https://www.youtube.com/watch?v=LxHftzNuzgg", justwatch: "https://www.justwatch.com/us/movie/misery" },
            { id: 16, title: "Prisoners", year: 2013, genres: ["Thriller"], synopsis: "When two young girls disappear, a desperate father takes matters into his own hands. The line between justice and vengeance blurs dangerously.", trailer: "https://www.youtube.com/watch?v=bpXfcTF6iVk", justwatch: "https://www.justwatch.com/us/movie/prisoners" },
            { id: 17, title: "The Sacrament", year: 2013, genres: ["Thriller", "Horror", "Documentary"], synopsis: "A news crew follows a man to an isolated religious community. What begins as paradise soon reveals a sinister cult. Inspired by true events.", trailer: "https://www.youtube.com/watch?v=2F6BgI62gs0", justwatch: "https://www.justwatch.com/us/movie/the-sacrament" },
            { id: 18, title: "The Invitation", year: 2015, genres: ["Thriller", "Horror"], synopsis: "A man accepts an invitation to dinner at his ex-wife's home. His mounting paranoia leads to a shocking revelation that changes everything.", trailer: "https://www.youtube.com/watch?v=0-mp77SZ_0M", justwatch: "https://www.justwatch.com/us/movie/the-invitation-2015" },
            { id: 19, title: "The Invisible Man", year: 2020, genres: ["Thriller", "Horror", "Sci-Fi"], synopsis: "After escaping her abusive boyfriend, a woman discovers he faked his suicide and is stalking her while invisible.", trailer: "https://www.youtube.com/watch?v=WO_FJdiY9dA", justwatch: "https://www.justwatch.com/us/movie/the-invisible-man-2020" },
            { id: 20, title: "Disturbia", year: 2007, genres: ["Thriller", "Horror"], synopsis: "A troubled teen under house arrest suspects his neighbor is a serial killer. His surveillance leads him into dangerous territory.", trailer: "https://www.youtube.com/watch?v=0_omUniYJOY", justwatch: "https://www.justwatch.com/us/movie/disturbia" },
            { id: 21, title: "No One Will Save You", year: 2023, genres: ["Thriller", "Sci-Fi", "Horror"], synopsis: "A young woman faces extraterrestrial beings invading her isolated home. With almost no dialogue, an intense fight for survival.", trailer: "https://www.youtube.com/watch?v=rhPuYMGmcHY", justwatch: "https://www.justwatch.com/us/movie/no-one-will-save-you" },
            { id: 22, title: "Phone Booth", year: 2002, genres: ["Thriller"], synopsis: "A publicist is trapped in a phone booth by a sniper who knows his darkest secrets. The entire city watches as he's forced to confess.", trailer: "https://www.youtube.com/watch?v=v7tH1xVLmrg", justwatch: "https://www.justwatch.com/us/movie/phone-booth" },
            { id: 23, title: "Dark Skies", year: 2013, genres: ["Thriller", "Sci-Fi", "Horror"], synopsis: "A suburban family discovers they're being targeted by a terrifying force from beyond our world.", trailer: "https://www.youtube.com/watch?v=_HuiPmrjPeM", justwatch: "https://www.justwatch.com/us/movie/dark-skies" },
            { id: 24, title: "The Host", year: 2006, genres: ["Thriller", "Horror", "Action"], synopsis: "A mutant monster emerges from Seoul's Han River. A dysfunctional family must rescue their daughter from the creature's lair.", trailer: "https://www.youtube.com/watch?v=1EJklHbc_cc", justwatch: "https://www.justwatch.com/us/movie/the-host-2006" },
            { id: 25, title: "Lost in Translation", year: 2003, genres: ["Romance", "Drama"], synopsis: "A faded movie star and a neglected young wife form an unlikely bond in Tokyo, finding connection amid alienation.", trailer: "https://www.youtube.com/watch?v=W6iVPCRflQM", justwatch: "https://www.justwatch.com/us/movie/lost-in-translation" },
            { id: 26, title: "True Romance", year: 1993, genres: ["Romance", "Action", "Thriller"], synopsis: "A comic-book nerd and a call girl fall in love. After stealing cocaine from her pimp, they go on the run with gangsters in pursuit.", trailer: "https://www.youtube.com/watch?v=OFSvjGPdPFA", justwatch: "https://www.justwatch.com/us/movie/true-romance" },
            { id: 27, title: "Love Actually", year: 2003, genres: ["Romance", "Drama"], synopsis: "Ten separate stories interweave in the weeks before Christmas in London, exploring love in all its forms.", trailer: "https://www.youtube.com/watch?v=H9Z3_ifFheQ", justwatch: "https://www.justwatch.com/us/movie/love-actually" },
            { id: 28, title: "Poetic Justice", year: 1993, genres: ["Romance", "Drama", "Hood"], synopsis: "A young hairdresser and poet, grieving her boyfriend's murder, finds unexpected romance on a road trip to Oakland.", trailer: "https://www.youtube.com/watch?v=x1VHw2fKiyM", justwatch: "https://www.justwatch.com/us/movie/poetic-justice" },
            { id: 29, title: "Above the Rim", year: 1994, genres: ["Drama", "Hood", "Action"], synopsis: "A high school basketball star is torn between his future and street life when a drug dealer tries to recruit him.", trailer: "https://www.youtube.com/watch?v=jbG9DAyrdLI", justwatch: "https://www.justwatch.com/us/movie/above-the-rim" },
            { id: 30, title: "A Thin Line Between Love and Hate", year: 1996, genres: ["Romance", "Thriller", "Hood"], synopsis: "A charming nightclub promoter spurns a sophisticated businesswoman who reveals a dangerous obsession.", trailer: "https://www.youtube.com/watch?v=VMQP5NiNbSw", justwatch: "https://www.justwatch.com/us/movie/a-thin-line-between-love-and-hate" },
            { id: 31, title: "The Pursuit of Happyness", year: 2006, genres: ["Drama"], synopsis: "Based on a true story, a struggling salesman faces homelessness while fighting to build a better life against impossible odds.", trailer: "https://www.youtube.com/watch?v=89Rj5qoAAjQ", justwatch: "https://www.justwatch.com/us/movie/the-pursuit-of-happyness" },
            { id: 32, title: "White Men Can't Jump", year: 1992, genres: ["Drama", "Action", "Hood"], synopsis: "A white basketball hustler teams up with a Black street player to con their way through Los Angeles courts.", trailer: "https://www.youtube.com/watch?v=AccfqfSRHx8", justwatch: "https://www.justwatch.com/us/movie/white-men-cant-jump" },
            { id: 33, title: "The Game", year: 1997, genres: ["Thriller"], synopsis: "A wealthy banker receives a mysterious game that integrates into his real life. He can't tell what's real anymore.", trailer: "https://www.youtube.com/watch?v=rCS6RJxpL2s", justwatch: "https://www.justwatch.com/us/movie/the-game" },
            { id: 34, title: "Pacific Heights", year: 1990, genres: ["Thriller"], synopsis: "A young couple rents to a charming tenant who turns out to be a sociopathic con artist systematically destroying their lives.", trailer: "https://www.youtube.com/watch?v=s1oVGzS2N3s", justwatch: "https://www.justwatch.com/us/movie/pacific-heights" },
            { id: 35, title: "Jurassic Park", year: 1993, genres: ["Action", "Thriller", "Sci-Fi"], synopsis: "Scientists visit an island theme park with dinosaurs. When security fails, they must survive prehistoric predators.", trailer: "https://www.youtube.com/watch?v=lc0UehYemQA", justwatch: "https://www.justwatch.com/us/movie/jurassic-park" },
            { id: 36, title: "Marathon Man", year: 1976, genres: ["Thriller", "Classic"], synopsis: "A history student is hunted by a former Nazi war criminal seeking diamonds from a concentration camp.", trailer: "https://www.youtube.com/watch?v=dG3HFiFNODE", justwatch: "https://www.justwatch.com/us/movie/marathon-man" },
            { id: 37, title: "The Tenant", year: 1976, genres: ["Thriller", "Horror", "Classic"], synopsis: "A shy bureaucrat rents an apartment where the previous tenant threw herself out the window. He becomes convinced neighbors are plotting against him.", trailer: "https://www.youtube.com/watch?v=IOjndZRb0VM", justwatch: "https://www.justwatch.com/us/movie/the-tenant" },
            { id: 38, title: "The Vanishing", year: 1988, genres: ["Thriller", "Horror"], synopsis: "A man's girlfriend disappears. Years later, her kidnapper offers to show him the truth. Dutch original.", trailer: "https://www.youtube.com/watch?v=CwtMD7QXBPQ", justwatch: "https://www.justwatch.com/us/movie/the-vanishing-1988" },
            { id: 39, title: "Akira", year: 1988, genres: ["Action", "Sci-Fi", "Classic"], synopsis: "In dystopian Neo-Tokyo, a biker gang member develops telekinetic abilities. His friend must stop him before he destroys everything.", trailer: "https://www.youtube.com/watch?v=wCgJb4BFBEc", justwatch: "https://www.justwatch.com/us/movie/akira" },
            { id: 40, title: "The Silence of the Lambs", year: 1991, genres: ["Thriller", "Horror"], synopsis: "An FBI trainee seeks help from an imprisoned cannibal killer to catch another serial killer. A dangerous psychological dance.", trailer: "https://www.youtube.com/watch?v=W6Mm8Sbe__o", justwatch: "https://www.justwatch.com/us/movie/the-silence-of-the-lambs" },
            { id: 41, title: "The Sting", year: 1973, genres: ["Thriller", "Classic"], synopsis: "Two con artists in 1930s Chicago set up an elaborate scheme to swindle a powerful crime boss. The ultimate long con.", trailer: "https://www.youtube.com/watch?v=JqclJwMXp0g", justwatch: "https://www.justwatch.com/us/movie/the-sting" },
            { id: 42, title: "127 Hours", year: 2010, genres: ["Thriller", "Drama"], synopsis: "Based on a true story, a mountain climber becomes trapped under a boulder and must make a desperate decision to survive.", trailer: "https://www.youtube.com/watch?v=OlhLOWTnVoQ", justwatch: "https://www.justwatch.com/us/movie/127-hours" }
        ];

        // ==================== DINNER DATA ====================
        let dinners = [
            { id: 1, name: "Tacos", type: "both", tags: ["Mexican", "Quick", "Comfort"], effort: "easy", desc: "Classic ground beef tacos with all the fixings.", recipe: "https://www.allrecipes.com/recipe/70935/authentic-homemade-tacos/" },
            { id: 2, name: "Spaghetti & Meatballs", type: "cook", tags: ["Italian", "Comfort", "Quick"], effort: "easy", desc: "Homemade meatballs in marinara over pasta.", recipe: "https://www.allrecipes.com/recipe/21353/italian-spaghetti-sauce-with-meatballs/" },
            { id: 3, name: "Grilled Cheese & Tomato Soup", type: "cook", tags: ["American", "Comfort", "Quick"], effort: "easy", desc: "Crispy buttery sandwich with creamy soup.", recipe: "https://www.allrecipes.com/recipe/23891/grilled-cheese-sandwich/" },
            { id: 4, name: "Stir Fry", type: "cook", tags: ["Asian", "Quick", "Healthy"], effort: "easy", desc: "Quick veggie and protein stir fry with soy sauce over rice.", recipe: "https://www.allrecipes.com/recipe/228823/quick-beef-stir-fry/" },
            { id: 5, name: "Breakfast for Dinner", type: "cook", tags: ["American", "Quick", "Comfort"], effort: "easy", desc: "Pancakes, eggs, bacon - Brinner hits different.", recipe: null },
            { id: 6, name: "Quesadillas", type: "cook", tags: ["Mexican", "Quick"], effort: "easy", desc: "Cheesy, crispy tortillas with chicken, steak, or just cheese.", recipe: "https://www.allrecipes.com/recipe/24108/chicken-quesadillas/" },
            { id: 7, name: "Burgers", type: "both", tags: ["American", "Comfort", "Quick"], effort: "easy", desc: "Juicy homemade patties. Cheese is mandatory.", recipe: "https://www.allrecipes.com/recipe/25473/the-perfect-basic-burger/" },
            { id: 8, name: "Salmon & Veggies", type: "cook", tags: ["Healthy", "Quick"], effort: "easy", desc: "Pan-seared or baked salmon with roasted vegetables.", recipe: "https://www.allrecipes.com/recipe/228285/simple-baked-salmon/" },
            { id: 9, name: "Chicken Alfredo", type: "cook", tags: ["Italian", "Comfort"], effort: "medium", desc: "Creamy parmesan sauce over fettuccine with grilled chicken.", recipe: "https://www.allrecipes.com/recipe/23431/to-die-for-fettuccine-alfredo/" },
            { id: 10, name: "Fried Chicken", type: "both", tags: ["Soul Food", "Comfort", "American"], effort: "medium", desc: "Crispy, juicy, seasoned perfection.", recipe: "https://www.allrecipes.com/recipe/8805/crispy-fried-chicken/" },
            { id: 11, name: "Jerk Chicken", type: "cook", tags: ["Caribbean", "Comfort"], effort: "medium", desc: "Spicy, aromatic Caribbean-style chicken.", recipe: "https://www.allrecipes.com/recipe/85700/jamaican-jerk-chicken/" },
            { id: 12, name: "Lasagna", type: "cook", tags: ["Italian", "Comfort"], effort: "involved", desc: "Layers of pasta, meat sauce, and cheese.", recipe: "https://www.allrecipes.com/recipe/23600/worlds-best-lasagna/" },
            { id: 13, name: "Shrimp & Grits", type: "cook", tags: ["Soul Food", "Comfort"], effort: "medium", desc: "Creamy grits topped with saut√©ed shrimp in buttery sauce.", recipe: "https://www.allrecipes.com/recipe/21361/shrimp-and-grits/" },
            { id: 14, name: "Enchiladas", type: "cook", tags: ["Mexican", "Comfort"], effort: "medium", desc: "Rolled tortillas smothered in sauce and cheese.", recipe: "https://www.allrecipes.com/recipe/57302/easy-mole-chicken-enchiladas/" },
            { id: 15, name: "Curry", type: "cook", tags: ["Asian", "Comfort", "Healthy"], effort: "medium", desc: "Rich, aromatic curry with coconut milk over jasmine rice.", recipe: "https://www.allrecipes.com/recipe/46822/indian-chicken-curry/" },
            { id: 16, name: "Pot Roast", type: "cook", tags: ["American", "Comfort"], effort: "involved", desc: "Slow-cooked beef with potatoes and carrots.", recipe: "https://www.allrecipes.com/recipe/16066/simple-perfect-pot-roast/" },
            { id: 17, name: "Oxtails", type: "cook", tags: ["Soul Food", "Caribbean", "Comfort"], effort: "involved", desc: "Fall-off-the-bone tender. Braised in rich gravy.", recipe: "https://www.allrecipes.com/recipe/216564/jamaican-oxtail-with-broad-beans/" },
            { id: 18, name: "Pizza", type: "order", tags: ["Italian", "Quick", "Comfort"], effort: "easy", desc: "The ultimate delivery classic.", recipe: null },
            { id: 19, name: "Chinese Takeout", type: "order", tags: ["Asian", "Quick", "Comfort"], effort: "easy", desc: "Orange chicken, lo mein, fried rice - the works.", recipe: null },
            { id: 20, name: "Thai Food", type: "order", tags: ["Asian", "Comfort"], effort: "easy", desc: "Pad Thai, green curry, drunken noodles.", recipe: null },
            { id: 21, name: "Soul Food Restaurant", type: "order", tags: ["Soul Food", "Comfort"], effort: "easy", desc: "Fried chicken, mac & cheese, collard greens, cornbread.", recipe: null },
            { id: 22, name: "Wings", type: "both", tags: ["American", "Quick", "Comfort"], effort: "easy", desc: "Hot, BBQ, lemon pepper - pick your poison.", recipe: "https://www.allrecipes.com/recipe/187822/baked-chicken-wings/" },
            { id: 23, name: "Sushi", type: "order", tags: ["Asian", "Healthy"], effort: "easy", desc: "Fresh rolls, sashimi, and tempura.", recipe: null },
            { id: 24, name: "BBQ", type: "order", tags: ["American", "Soul Food", "Comfort"], effort: "easy", desc: "Ribs, brisket, pulled pork with classic sides.", recipe: null },
            { id: 25, name: "Mediterranean/Shawarma", type: "order", tags: ["Mediterranean", "Healthy"], effort: "easy", desc: "Shawarma, falafel, hummus, pita.", recipe: null },
            { id: 26, name: "Indian Food", type: "order", tags: ["Asian", "Comfort"], effort: "easy", desc: "Butter chicken, tikka masala, naan bread.", recipe: null },
            { id: 27, name: "Seafood Boil", type: "both", tags: ["Comfort", "Soul Food"], effort: "medium", desc: "Crab legs, shrimp, sausage in Cajun butter.", recipe: "https://www.allrecipes.com/recipe/268449/seafood-boil-with-garlic-butter-sauce/" },
            { id: 28, name: "Steakhouse", type: "order", tags: ["American", "Comfort"], effort: "easy", desc: "Perfectly cooked steak with loaded baked potato.", recipe: null },
            { id: 29, name: "Pho", type: "order", tags: ["Asian", "Healthy", "Comfort"], effort: "easy", desc: "Hot Vietnamese soup with rice noodles and herbs.", recipe: null },
            { id: 30, name: "Ramen", type: "order", tags: ["Asian", "Comfort"], effort: "easy", desc: "Rich broth, springy noodles, soft egg, chashu pork.", recipe: null },
            { id: 31, name: "Baked Mac & Cheese", type: "cook", tags: ["Soul Food", "Comfort", "American"], effort: "medium", desc: "Creamy, cheesy, with that crispy top.", recipe: "https://www.allrecipes.com/recipe/11679/homemade-mac-and-cheese/" },
            { id: 32, name: "Fish Tacos", type: "both", tags: ["Mexican", "Healthy", "Quick"], effort: "easy", desc: "Crispy fish with slaw and chipotle crema.", recipe: "https://www.allrecipes.com/recipe/127862/beer-battered-fish-tacos/" },
            { id: 33, name: "Jambalaya", type: "cook", tags: ["Soul Food", "Cajun", "Comfort"], effort: "medium", desc: "Spicy rice dish with shrimp, sausage, and chicken.", recipe: "https://www.allrecipes.com/recipe/234534/jambalaya/" },
            { id: 34, name: "Smothered Pork Chops", type: "cook", tags: ["Soul Food", "Comfort"], effort: "medium", desc: "Pan-fried chops smothered in rich onion gravy.", recipe: "https://www.allrecipes.com/recipe/219472/smothered-pork-chops/" },
            { id: 35, name: "Chicken Parmesan", type: "cook", tags: ["Italian", "Comfort"], effort: "medium", desc: "Breaded chicken topped with marinara and mozzarella.", recipe: "https://www.allrecipes.com/recipe/223042/chicken-parmesan/" },
            { id: 36, name: "Salmon Cakes", type: "cook", tags: ["Soul Food", "Healthy", "Quick"], effort: "easy", desc: "Pan-fried salmon patties. Crispy outside, tender inside.", recipe: "https://www.allrecipes.com/recipe/14117/salmon-patties-ii/" },
            { id: 37, name: "Loaded Nachos", type: "both", tags: ["Mexican", "Quick", "Comfort"], effort: "easy", desc: "Chips piled high with cheese, meat, beans, jalape√±os.", recipe: "https://www.allrecipes.com/recipe/26091/beef-nachos/" },
            { id: 38, name: "Gumbo", type: "cook", tags: ["Soul Food", "Cajun", "Comfort"], effort: "involved", desc: "Rich roux-based stew with okra, sausage, seafood over rice.", recipe: "https://www.allrecipes.com/recipe/216888/chicken-and-sausage-gumbo/" },
            { id: 39, name: "Stuffed Peppers", type: "cook", tags: ["American", "Healthy"], effort: "medium", desc: "Bell peppers filled with seasoned beef, rice, and cheese.", recipe: "https://www.allrecipes.com/recipe/14048/stuffed-peppers/" },
            { id: 40, name: "Cabbage Rolls", type: "cook", tags: ["Comfort", "European"], effort: "involved", desc: "Cabbage leaves stuffed with savory meat and rice in tomato sauce.", recipe: "https://www.allrecipes.com/recipe/22030/sarma-serbian-stuffed-cabbage-rolls/" }
        ];

        // ==================== DATE NIGHT DATA ====================
        let dateActivities = [
            // ACTIVE / ADVENTURE
            { id: 1, name: "Escape Room", tags: ["Active", "Fun", "Indoor"], price: "moderate", desc: "Work together to solve puzzles and escape before time runs out. Great for teamwork!", grouponActivity: "https://www.groupon.com/local/things-to-do/escape-room" },
            { id: 2, name: "Bowling", tags: ["Active", "Fun", "Indoor"], price: "budget", desc: "Classic date night vibes. Cosmic bowling is extra fun.", grouponActivity: "https://www.groupon.com/local/things-to-do/bowling" },
            { id: 3, name: "Mini Golf", tags: ["Active", "Fun", "Outdoor"], price: "budget", desc: "Playful competition with a relaxed vibe. Great for conversation.", grouponActivity: "https://www.groupon.com/local/things-to-do/mini-golf" },
            { id: 4, name: "Go Karts", tags: ["Active", "Fun", "Adventure"], price: "moderate", desc: "Race each other! Loser buys dessert.", grouponActivity: "https://www.groupon.com/local/things-to-do/go-karts" },
            { id: 5, name: "Laser Tag", tags: ["Active", "Fun", "Indoor"], price: "budget", desc: "Run around like kids again. It's more fun than you remember.", grouponActivity: "https://www.groupon.com/local/things-to-do/laser-tag" },
            { id: 6, name: "Ax Throwing", tags: ["Active", "Adventure", "Fun"], price: "moderate", desc: "Surprisingly satisfying and fun to learn together.", grouponActivity: "https://www.groupon.com/local/things-to-do/axe-throwing" },
            { id: 7, name: "Trampoline Park", tags: ["Active", "Fun", "Indoor"], price: "budget", desc: "Jump around, play dodgeball, feel like a kid again.", grouponActivity: "https://www.groupon.com/local/things-to-do/trampoline-park" },
            { id: 8, name: "Hiking / Nature Walk", tags: ["Active", "Free", "Outdoor", "Romantic"], price: "free", desc: "Find a scenic trail and enjoy nature together. Pack snacks!", grouponActivity: null },
            { id: 9, name: "Bike Ride", tags: ["Active", "Free", "Outdoor"], price: "free", desc: "Explore your city or a local trail on two wheels.", grouponActivity: null },
            { id: 10, name: "Rock Climbing Gym", tags: ["Active", "Adventure", "Indoor"], price: "moderate", desc: "Challenge yourselves and cheer each other on.", grouponActivity: "https://www.groupon.com/local/things-to-do/rock-climbing" },

            // CHILL / RELAXED
            { id: 11, name: "Spa Day / Couples Massage", tags: ["Chill", "Romantic", "Splurge"], price: "splurge", desc: "Ultimate relaxation. Treat yourselves.", grouponActivity: "https://www.groupon.com/local/things-to-do/spa" },
            { id: 12, name: "Wine Tasting", tags: ["Chill", "Romantic", "Cultural"], price: "moderate", desc: "Sample wines and learn something new together.", grouponActivity: "https://www.groupon.com/local/food-and-drink/wine-tasting" },
            { id: 13, name: "Picnic in the Park", tags: ["Chill", "Romantic", "Free", "Outdoor"], price: "free", desc: "Pack some food, bring a blanket, and enjoy being outside together.", grouponActivity: null },
            { id: 14, name: "Bookstore Browse + Coffee", tags: ["Chill", "Free", "Indoor"], price: "free", desc: "Wander a bookstore, pick books for each other, then coffee.", grouponActivity: null },
            { id: 15, name: "Stargazing", tags: ["Chill", "Romantic", "Free", "Outdoor"], price: "free", desc: "Find a dark spot away from city lights. Bring blankets and snacks.", grouponActivity: null },
            { id: 16, name: "Farmers Market", tags: ["Chill", "Cultural", "Outdoor"], price: "budget", desc: "Walk around, sample food, pick up ingredients for cooking together.", grouponActivity: null },

            // FUN / GAMES
            { id: 17, name: "Arcade / Barcade", tags: ["Fun", "Indoor", "Active"], price: "budget", desc: "Play classic games, win tickets, be competitive.", grouponActivity: "https://www.groupon.com/local/things-to-do/arcade" },
            { id: 18, name: "Trivia Night", tags: ["Fun", "Indoor"], price: "budget", desc: "Team up at a local bar's trivia night. Put your combined knowledge to the test.", grouponActivity: null },
            { id: 19, name: "Comedy Show", tags: ["Fun", "Cultural", "Indoor"], price: "moderate", desc: "Laugh together! Check local clubs or theaters.", grouponActivity: "https://www.groupon.com/local/things-to-do/comedy-show" },
            { id: 20, name: "Karaoke Night", tags: ["Fun", "Indoor"], price: "budget", desc: "Sing your hearts out. Duets encouraged!", grouponActivity: "https://www.groupon.com/local/things-to-do/karaoke" },
            { id: 21, name: "Board Game Cafe", tags: ["Fun", "Chill", "Indoor"], price: "budget", desc: "Try new games with unlimited options. Usually has good snacks too.", grouponActivity: null },
            { id: 22, name: "Dave & Buster's", tags: ["Fun", "Indoor", "Active"], price: "moderate", desc: "Games, food, drinks - all in one place.", grouponActivity: "https://www.groupon.com/local/things-to-do/dave-and-busters" },

            // CULTURAL
            { id: 23, name: "Museum Visit", tags: ["Cultural", "Indoor"], price: "budget", desc: "Art, history, science - pick your interest and explore together.", grouponActivity: "https://www.groupon.com/local/things-to-do/museum" },
            { id: 24, name: "Art Gallery Opening", tags: ["Cultural", "Free", "Indoor"], price: "free", desc: "Free wine, interesting art, great conversation starter.", grouponActivity: null },
            { id: 25, name: "Live Music / Concert", tags: ["Cultural", "Fun"], price: "moderate", desc: "See a band you love or discover someone new.", grouponActivity: "https://www.groupon.com/local/things-to-do/concert" },
            { id: 26, name: "Theater / Play", tags: ["Cultural", "Romantic"], price: "moderate", desc: "Support local theater. Dress up and make it special.", grouponActivity: "https://www.groupon.com/local/things-to-do/theater" },
            { id: 27, name: "Cooking Class", tags: ["Cultural", "Romantic", "Fun"], price: "moderate", desc: "Learn to make something new together. Take the skills home!", grouponActivity: "https://www.groupon.com/local/things-to-do/cooking-class" },
            { id: 28, name: "Paint & Sip", tags: ["Cultural", "Chill", "Fun"], price: "moderate", desc: "Create art together while enjoying wine. No skill required.", grouponActivity: "https://www.groupon.com/local/things-to-do/painting-class" },
            { id: 29, name: "Pottery Class", tags: ["Cultural", "Romantic", "Fun"], price: "moderate", desc: "Get your hands dirty making something together.", grouponActivity: "https://www.groupon.com/local/things-to-do/pottery-class" },
            { id: 30, name: "Botanical Garden", tags: ["Cultural", "Romantic", "Outdoor"], price: "budget", desc: "Beautiful scenery, peaceful walks, great photo ops.", grouponActivity: "https://www.groupon.com/local/things-to-do/botanical-garden" },

            // ROMANTIC
            { id: 31, name: "Sunset Dinner Cruise", tags: ["Romantic", "Splurge"], price: "splurge", desc: "Dinner on the water watching the sunset. Top tier romance.", grouponActivity: "https://www.groupon.com/local/things-to-do/cruise" },
            { id: 32, name: "Rooftop Bar", tags: ["Romantic", "Chill"], price: "moderate", desc: "City views, cocktails, and vibes.", grouponActivity: "https://www.groupon.com/local/food-and-drink/rooftop-bar" },
            { id: 33, name: "Drive-In Movie", tags: ["Romantic", "Chill", "Fun"], price: "budget", desc: "Old school romance. Bring blankets and snacks.", grouponActivity: null },
            { id: 34, name: "Hot Air Balloon Ride", tags: ["Romantic", "Adventure", "Splurge"], price: "splurge", desc: "Bucket list experience with incredible views.", grouponActivity: "https://www.groupon.com/local/things-to-do/hot-air-balloon" },
            { id: 35, name: "Fancy Dinner Out", tags: ["Romantic", "Splurge"], price: "splurge", desc: "Dress up, go somewhere special, make it a night to remember.", grouponActivity: "https://www.groupon.com/local/food-and-drink/fine-dining" }
        ];

        let dateFoods = [
            { id: 101, name: "Italian Restaurant", tags: ["Romantic", "Comfort"], price: "moderate", desc: "Pasta, wine, and candlelit vibes.", grouponFood: "https://www.groupon.com/local/food-and-drink/italian" },
            { id: 102, name: "Sushi Bar", tags: ["Fun", "Healthy"], price: "moderate", desc: "Fresh rolls and sake. Sit at the bar for the experience.", grouponFood: "https://www.groupon.com/local/food-and-drink/sushi" },
            { id: 103, name: "Mexican Cantina", tags: ["Fun", "Comfort"], price: "budget", desc: "Tacos, margaritas, and good energy.", grouponFood: "https://www.groupon.com/local/food-and-drink/mexican" },
            { id: 104, name: "Steakhouse", tags: ["Romantic", "Splurge"], price: "splurge", desc: "Treat yourselves to a quality steak dinner.", grouponFood: "https://www.groupon.com/local/food-and-drink/steakhouse" },
            { id: 105, name: "Thai Restaurant", tags: ["Fun", "Comfort"], price: "budget", desc: "Bold flavors, great for sharing.", grouponFood: "https://www.groupon.com/local/food-and-drink/thai" },
            { id: 106, name: "BBQ Joint", tags: ["Fun", "Comfort"], price: "moderate", desc: "Ribs, brisket, and good times.", grouponFood: "https://www.groupon.com/local/food-and-drink/bbq" },
            { id: 107, name: "Brunch Spot", tags: ["Chill", "Fun"], price: "moderate", desc: "Perfect for a daytime date. Mimosas included.", grouponFood: "https://www.groupon.com/local/food-and-drink/brunch" },
            { id: 108, name: "Tapas / Small Plates", tags: ["Romantic", "Fun"], price: "moderate", desc: "Share a bunch of dishes. Great for conversation.", grouponFood: "https://www.groupon.com/local/food-and-drink/tapas" },
            { id: 109, name: "Korean BBQ", tags: ["Fun", "Active"], price: "moderate", desc: "Grill your own meat at the table. Interactive and delicious.", grouponFood: "https://www.groupon.com/local/food-and-drink/korean" },
            { id: 110, name: "Seafood Restaurant", tags: ["Romantic", "Splurge"], price: "splurge", desc: "Fresh catches and ocean vibes.", grouponFood: "https://www.groupon.com/local/food-and-drink/seafood" },
            { id: 111, name: "Pizza Place", tags: ["Chill", "Budget"], price: "budget", desc: "Can't go wrong with good pizza.", grouponFood: "https://www.groupon.com/local/food-and-drink/pizza" },
            { id: 112, name: "Indian Restaurant", tags: ["Fun", "Comfort"], price: "moderate", desc: "Rich curries, naan bread, and bold spices.", grouponFood: "https://www.groupon.com/local/food-and-drink/indian" },
            { id: 113, name: "Ramen Shop", tags: ["Chill", "Comfort"], price: "budget", desc: "Warm bowls of comfort. Slurp away.", grouponFood: "https://www.groupon.com/local/food-and-drink/ramen" },
            { id: 114, name: "Mediterranean Grill", tags: ["Healthy", "Chill"], price: "moderate", desc: "Fresh, flavorful, and feels good.", grouponFood: "https://www.groupon.com/local/food-and-drink/mediterranean" },
            { id: 115, name: "Food Hall / Food Court", tags: ["Fun", "Budget"], price: "budget", desc: "Options for everyone. Try a few different things.", grouponFood: null },
            { id: 116, name: "Dessert Bar / Ice Cream", tags: ["Romantic", "Chill"], price: "budget", desc: "End the night (or start it) with something sweet.", grouponFood: "https://www.groupon.com/local/food-and-drink/dessert" },
            { id: 117, name: "Southern/Soul Food", tags: ["Comfort", "Fun"], price: "moderate", desc: "Fried chicken, mac & cheese, and all the fixings.", grouponFood: "https://www.groupon.com/local/food-and-drink/soul-food" },
            { id: 118, name: "French Bistro", tags: ["Romantic", "Splurge"], price: "splurge", desc: "Ooh la la. Elegant and delicious.", grouponFood: "https://www.groupon.com/local/food-and-drink/french" }
        ];

        // ==================== STATE ====================
        let watchedMovies = JSON.parse(localStorage.getItem('watchedMovies') || '[]');
        let eatenDinners = JSON.parse(localStorage.getItem('eatenDinners') || '[]');
        let doneDates = JSON.parse(localStorage.getItem('doneDates') || '[]');
        let currentMovieFilter = 'all';
        let currentDinnerFilter = 'all';
        let currentDateFilter = 'all';
        let dinnerMode = 'all';

        // Load user-added items
        const userMovies = JSON.parse(localStorage.getItem('userMovies') || '[]');
        movies = [...movies, ...userMovies];
        const userDinners = JSON.parse(localStorage.getItem('userDinners') || '[]');
        dinners = [...dinners, ...userDinners];
        const userDates = JSON.parse(localStorage.getItem('userDates') || '[]');
        dateActivities = [...dateActivities, ...userDates];

        // ==================== DOM ELEMENTS ====================
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        // ==================== TAB SWITCHING ====================
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tab = btn.dataset.tab;
                tabBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === tab + 'Tab') content.classList.add('active');
                });
            });
        });

        // ==================== MOVIE FUNCTIONS ====================
        function getFilteredMovies() {
            let filtered = movies.filter(m => !watchedMovies.includes(m.id));
            if (currentMovieFilter !== 'all') {
                const filterMap = { 'thriller': ['Thriller'], 'action': ['Action'], 'horror': ['Horror'], 'romance': ['Romance'], 'classic': ['Classic'], 'documentary': ['Documentary'], 'scifi': ['Sci-Fi'] };
                const genres = filterMap[currentMovieFilter] || [];
                filtered = filtered.filter(m => m.genres.some(g => genres.some(f => g.toLowerCase().includes(f.toLowerCase()))));
            }
            return filtered;
        }

        function spinForMovies() {
            const available = getFilteredMovies();
            if (available.length === 0) { document.getElementById('movieResults').innerHTML = `<div class="empty-state"><h3>No movies available!</h3></div>`; return; }
            const spinBtn = document.getElementById('spinMovieBtn');
            spinBtn.classList.add('spinning'); spinBtn.disabled = true;
            let spins = 0;
            const spinInterval = setInterval(() => {
                displayMovies([...available].sort(() => Math.random() - 0.5).slice(0, 3), true);
                if (++spins >= 10) {
                    clearInterval(spinInterval);
                    spinBtn.classList.remove('spinning'); spinBtn.disabled = false;
                    displayMovies([...available].sort(() => Math.random() - 0.5).slice(0, Math.min(3, available.length)), false);
                }
            }, 150);
        }

        function displayMovies(list, spinning) {
            document.getElementById('movieResults').innerHTML = list.map(m => `
                <div class="card"><h3>${m.title} ${m.year ? `(${m.year})` : ''}</h3>
                <div class="card-meta">${m.genres.map(g => `<span class="tag">${g}</span>`).join('')}</div>
                <p>${m.synopsis}</p>
                <div class="card-links">
                    ${m.trailer ? `<a href="${m.trailer}" target="_blank" class="card-link trailer-link">‚ñ∂ Trailer</a>` : ''}
                    <a href="${m.justwatch}" target="_blank" class="card-link stream-link">üì∫ Stream</a>
                    ${!spinning ? `<button class="card-link pick-btn" onclick="pickMovie(${m.id})">‚úì Watching This!</button>` : ''}
                </div></div>
            `).join('');
        }

        function pickMovie(id) {
            if (!watchedMovies.includes(id)) {
                watchedMovies.push(id); localStorage.setItem('watchedMovies', JSON.stringify(watchedMovies));
                updateWatchedList(); updateMovieStats();
                const m = movies.find(x => x.id === id);
                document.getElementById('movieResults').innerHTML = `<div class="card" style="border: 2px solid #4CAF50;"><h3>üéâ Tonight's Pick: ${m.title}</h3><p>${m.synopsis}</p><div class="card-links">${m.trailer ? `<a href="${m.trailer}" target="_blank" class="card-link trailer-link">‚ñ∂ Trailer</a>` : ''}<a href="${m.justwatch}" target="_blank" class="card-link stream-link">üì∫ Stream</a></div><p style="margin-top: 15px; color: #81c784;">Enjoy your movie! üçø</p></div>`;
            }
        }

        function updateWatchedList() {
            const list = movies.filter(m => watchedMovies.includes(m.id));
            document.getElementById('watchedList').innerHTML = list.length ? list.map(m => `<span class="history-item">${m.title}<button class="remove-history" onclick="watchedMovies=watchedMovies.filter(i=>i!=${m.id});localStorage.setItem('watchedMovies',JSON.stringify(watchedMovies));updateWatchedList();updateMovieStats();">√ó</button></span>`).join('') : '<p style="color: #a0a0a0;">No movies watched yet.</p>';
        }

        function updateMovieStats() {
            document.getElementById('movieCount').textContent = getFilteredMovies().length;
            document.getElementById('watchedCount').textContent = watchedMovies.length;
        }

        // ==================== DINNER FUNCTIONS ====================
        function getFilteredDinners() {
            let filtered = dinners.filter(d => !eatenDinners.includes(d.id));
            if (dinnerMode === 'cook') filtered = filtered.filter(d => d.type === 'cook' || d.type === 'both');
            else if (dinnerMode === 'order') filtered = filtered.filter(d => d.type === 'order' || d.type === 'both');
            if (currentDinnerFilter !== 'all') {
                const filterMap = { 'quick': ['Quick'], 'comfort': ['Comfort'], 'healthy': ['Healthy'], 'mexican': ['Mexican'], 'asian': ['Asian'], 'italian': ['Italian'], 'american': ['American'], 'soul': ['Soul Food', 'Cajun'] };
                const tags = filterMap[currentDinnerFilter] || [];
                filtered = filtered.filter(d => d.tags.some(t => tags.some(f => t.toLowerCase().includes(f.toLowerCase()))));
            }
            return filtered;
        }

        function spinForDinners() {
            const available = getFilteredDinners();
            if (available.length === 0) { document.getElementById('dinnerResults').innerHTML = `<div class="empty-state"><h3>No dinner options!</h3></div>`; return; }
            const spinBtn = document.getElementById('spinDinnerBtn');
            spinBtn.classList.add('spinning'); spinBtn.disabled = true;
            let spins = 0;
            const spinInterval = setInterval(() => {
                displayDinners([...available].sort(() => Math.random() - 0.5).slice(0, 3), true);
                if (++spins >= 10) {
                    clearInterval(spinInterval);
                    spinBtn.classList.remove('spinning'); spinBtn.disabled = false;
                    displayDinners([...available].sort(() => Math.random() - 0.5).slice(0, Math.min(3, available.length)), false);
                }
            }, 150);
        }

        function displayDinners(list, spinning) {
            const effortLabels = { easy: '‚ö° Easy', medium: 'üë®‚Äçüç≥ Medium', involved: 'üî• Involved' };
            const effortClass = { easy: 'effort-easy', medium: 'effort-medium', involved: 'effort-involved' };
            document.getElementById('dinnerResults').innerHTML = list.map(d => `
                <div class="card dinner-card"><h3>${d.name} <span class="effort-badge ${effortClass[d.effort]}">${effortLabels[d.effort]}</span></h3>
                <div class="card-meta">${d.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                <p>${d.desc}</p>
                <div class="card-links">
                    ${d.recipe ? `<a href="${d.recipe}" target="_blank" class="card-link recipe-link">üìñ Recipe</a>` : ''}
                    ${d.type !== 'cook' ? `<a href="https://www.doordash.com/search/store/${encodeURIComponent(d.name)}/" target="_blank" class="card-link order-link">üöó Order</a>` : ''}
                    ${!spinning ? `<button class="card-link pick-btn" onclick="pickDinner(${d.id})">‚úì Eating This!</button>` : ''}
                </div></div>
            `).join('');
        }

        function pickDinner(id) {
            if (!eatenDinners.includes(id)) {
                eatenDinners.push(id); localStorage.setItem('eatenDinners', JSON.stringify(eatenDinners));
                updateEatenList(); updateDinnerStats();
                const d = dinners.find(x => x.id === id);
                document.getElementById('dinnerResults').innerHTML = `<div class="card dinner-card" style="border: 2px solid #4CAF50;"><h3>üéâ Tonight's Dinner: ${d.name}</h3><p>${d.desc}</p><p style="margin-top: 15px; color: #81c784;">Enjoy your meal! üçΩÔ∏è</p></div>`;
            }
        }

        function updateEatenList() {
            const list = dinners.filter(d => eatenDinners.includes(d.id));
            document.getElementById('eatenList').innerHTML = list.length ? list.map(d => `<span class="history-item">${d.name}<button class="remove-history" onclick="eatenDinners=eatenDinners.filter(i=>i!=${d.id});localStorage.setItem('eatenDinners',JSON.stringify(eatenDinners));updateEatenList();updateDinnerStats();">√ó</button></span>`).join('') : '<p style="color: #a0a0a0;">No recent dinners tracked.</p>';
        }

        function updateDinnerStats() {
            document.getElementById('dinnerCount').textContent = getFilteredDinners().length;
            document.getElementById('eatenCount').textContent = eatenDinners.length;
        }

        // ==================== DATE NIGHT FUNCTIONS ====================
        function getFilteredDates() {
            let filtered = dateActivities.filter(d => !doneDates.includes(d.id));
            if (currentDateFilter !== 'all') {
                const filterMap = { 'active': ['Active', 'Adventure'], 'chill': ['Chill'], 'romantic': ['Romantic'], 'fun': ['Fun'], 'cultural': ['Cultural'], 'free': ['Free'] };
                const tags = filterMap[currentDateFilter] || [];
                filtered = filtered.filter(d => d.tags.some(t => tags.some(f => t.toLowerCase().includes(f.toLowerCase()))));
            }
            return filtered;
        }

        function spinForDates() {
            const availableActivities = getFilteredDates();
            const availableFoods = dateFoods;
            if (availableActivities.length === 0) { document.getElementById('dateResults').innerHTML = `<div class="empty-state"><h3>No date ideas available!</h3></div>`; return; }
            const spinBtn = document.getElementById('spinDateBtn');
            spinBtn.classList.add('spinning'); spinBtn.disabled = true;
            let spins = 0;
            const spinInterval = setInterval(() => {
                const activity = availableActivities[Math.floor(Math.random() * availableActivities.length)];
                const food = availableFoods[Math.floor(Math.random() * availableFoods.length)];
                displayDatePlan(activity, food, true);
                if (++spins >= 10) {
                    clearInterval(spinInterval);
                    spinBtn.classList.remove('spinning'); spinBtn.disabled = false;
                    const finalActivity = availableActivities[Math.floor(Math.random() * availableActivities.length)];
                    const finalFood = availableFoods[Math.floor(Math.random() * availableFoods.length)];
                    displayDatePlan(finalActivity, finalFood, false);
                }
            }, 200);
        }

        function displayDatePlan(activity, food, spinning) {
            const priceLabels = { free: 'üíö Free', budget: 'üíô Budget', moderate: 'üíõ Moderate', splurge: '‚ù§Ô∏è Splurge' };
            const priceClass = { free: 'price-free', budget: 'price-budget', moderate: 'price-moderate', splurge: 'price-splurge' };
            document.getElementById('dateResults').innerHTML = `
                <div class="card date-plan-card" style="grid-column: 1 / -1;">
                    <h3>üíë Your Date Night Plan</h3>
                    <div class="date-plan-section">
                        <h4>üéØ Activity: ${activity.name} <span class="price-badge ${priceClass[activity.price]}">${priceLabels[activity.price]}</span></h4>
                        <div class="card-meta">${activity.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                        <p>${activity.desc}</p>
                        <div class="card-links">
                            ${activity.grouponActivity ? `<a href="${activity.grouponActivity}" target="_blank" class="card-link groupon-link">üé´ Find Deals on Groupon</a>` : ''}
                            <a href="https://www.groupon.com/local/things-to-do" target="_blank" class="card-link stream-link">üîç Browse All Activities</a>
                        </div>
                    </div>
                    <div class="date-plan-section">
                        <h4>üçΩÔ∏è Dinner: ${food.name} <span class="price-badge ${priceClass[food.price]}">${priceLabels[food.price]}</span></h4>
                        <div class="card-meta">${food.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                        <p>${food.desc}</p>
                        <div class="card-links">
                            ${food.grouponFood ? `<a href="${food.grouponFood}" target="_blank" class="card-link groupon-link">üç¥ Find Food Deals</a>` : ''}
                            <a href="https://www.groupon.com/local/food-and-drink" target="_blank" class="card-link order-link">üîç Browse All Food Deals</a>
                        </div>
                    </div>
                    ${!spinning ? `<div style="text-align: center; margin-top: 20px;"><button class="card-link pick-btn" onclick="pickDate(${activity.id}, '${activity.name}', '${food.name}')" style="padding: 15px 40px; font-size: 1.1rem;">üíï This is Our Date!</button></div>` : ''}
                </div>
            `;
        }

        function pickDate(activityId, activityName, foodName) {
            if (!doneDates.includes(activityId)) {
                doneDates.push(activityId); localStorage.setItem('doneDates', JSON.stringify(doneDates));
                updateDateList(); updateDateStats();
            }
            document.getElementById('dateResults').innerHTML = `
                <div class="card date-plan-card" style="grid-column: 1 / -1; border: 2px solid #4CAF50;">
                    <h3>üéâ Date Night is Set!</h3>
                    <p style="font-size: 1.2rem; margin: 20px 0;"><strong>Activity:</strong> ${activityName}</p>
                    <p style="font-size: 1.2rem; margin: 20px 0;"><strong>Dinner:</strong> ${foodName}</p>
                    <p style="color: #81c784; margin-top: 20px;">Have an amazing time together! üíï</p>
                </div>
            `;
        }

        function updateDateList() {
            const list = dateActivities.filter(d => doneDates.includes(d.id));
            document.getElementById('dateList').innerHTML = list.length ? list.map(d => `<span class="history-item">${d.name}<button class="remove-history" onclick="doneDates=doneDates.filter(i=>i!=${d.id});localStorage.setItem('doneDates',JSON.stringify(doneDates));updateDateList();updateDateStats();">√ó</button></span>`).join('') : '<p style="color: #a0a0a0;">No recent dates tracked.</p>';
        }

        function updateDateStats() {
            document.getElementById('dateCount').textContent = getFilteredDates().length;
            document.getElementById('doneCount').textContent = doneDates.length;
        }

        // ==================== EVENT LISTENERS ====================
        document.querySelectorAll('#movieTab .filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('#movieTab .filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active'); currentMovieFilter = btn.dataset.filter;
                updateMovieStats(); document.getElementById('movieResults').innerHTML = '';
            });
        });

        document.querySelectorAll('#dinnerTab .dinner-filter .filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('#dinnerTab .dinner-filter .filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active'); currentDinnerFilter = btn.dataset.filter;
                updateDinnerStats(); document.getElementById('dinnerResults').innerHTML = '';
            });
        });

        document.querySelectorAll('.cook-vs-order button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.cook-vs-order button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active'); dinnerMode = btn.dataset.mode;
                updateDinnerStats(); document.getElementById('dinnerResults').innerHTML = '';
            });
        });

        document.querySelectorAll('#datenightTab .datenight-filter .filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('#datenightTab .datenight-filter .filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active'); currentDateFilter = btn.dataset.filter;
                updateDateStats(); document.getElementById('dateResults').innerHTML = '';
            });
        });

        document.getElementById('spinMovieBtn').addEventListener('click', spinForMovies);
        document.getElementById('spinDinnerBtn').addEventListener('click', spinForDinners);
        document.getElementById('spinDateBtn').addEventListener('click', spinForDates);

        document.getElementById('addMovieForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const newMovie = { id: Date.now(), title: document.getElementById('movieTitle').value, year: parseInt(document.getElementById('movieYear').value) || null, genres: document.getElementById('movieGenres').value.split(',').map(g => g.trim()), synopsis: document.getElementById('movieSynopsis').value, trailer: document.getElementById('movieTrailer').value || null, justwatch: `https://www.justwatch.com/us/search?q=${encodeURIComponent(document.getElementById('movieTitle').value)}` };
            movies.push(newMovie);
            const userMovies = JSON.parse(localStorage.getItem('userMovies') || '[]'); userMovies.push(newMovie); localStorage.setItem('userMovies', JSON.stringify(userMovies));
            document.getElementById('addMovieForm').reset(); updateMovieStats(); alert(`"${newMovie.title}" added!`);
        });

        document.getElementById('addDinnerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const newDinner = { id: Date.now(), name: document.getElementById('dinnerName').value, type: document.getElementById('dinnerType').value, tags: document.getElementById('dinnerTags').value.split(',').map(t => t.trim()), effort: document.getElementById('dinnerEffort').value, desc: document.getElementById('dinnerDesc').value || 'A delicious meal option.', recipe: document.getElementById('dinnerRecipe').value || null };
            dinners.push(newDinner);
            const userDinners = JSON.parse(localStorage.getItem('userDinners') || '[]'); userDinners.push(newDinner); localStorage.setItem('userDinners', JSON.stringify(userDinners));
            document.getElementById('addDinnerForm').reset(); updateDinnerStats(); alert(`"${newDinner.name}" added!`);
        });

        document.getElementById('addDateForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const newDate = { id: Date.now(), name: document.getElementById('dateName').value, tags: document.getElementById('dateTags').value.split(',').map(t => t.trim()), price: document.getElementById('datePrice').value, desc: document.getElementById('dateDesc').value || 'A fun date idea!', grouponActivity: 'https://www.groupon.com/local/things-to-do' };
            dateActivities.push(newDate);
            const userDates = JSON.parse(localStorage.getItem('userDates') || '[]'); userDates.push(newDate); localStorage.setItem('userDates', JSON.stringify(userDates));
            document.getElementById('addDateForm').reset(); updateDateStats(); alert(`"${newDate.name}" added!`);
        });

        document.getElementById('clearMovieHistory').addEventListener('click', () => { if (confirm('Clear all movie watch history?')) { watchedMovies = []; localStorage.setItem('watchedMovies', JSON.stringify(watchedMovies)); updateWatchedList(); updateMovieStats(); } });
        document.getElementById('clearDinnerHistory').addEventListener('click', () => { if (confirm('Clear all dinner history?')) { eatenDinners = []; localStorage.setItem('eatenDinners', JSON.stringify(eatenDinners)); updateEatenList(); updateDinnerStats(); } });
        document.getElementById('clearDateHistory').addEventListener('click', () => { if (confirm('Clear all date history?')) { doneDates = []; localStorage.setItem('doneDates', JSON.stringify(doneDates)); updateDateList(); updateDateStats(); } });

        document.getElementById('toggleMovieHistory').addEventListener('click', function() { document.getElementById('watchedList').classList.toggle('hidden'); this.textContent = document.getElementById('watchedList').classList.contains('hidden') ? 'Show' : 'Hide'; });
        document.getElementById('toggleDinnerHistory').addEventListener('click', function() { document.getElementById('eatenList').classList.toggle('hidden'); this.textContent = document.getElementById('eatenList').classList.contains('hidden') ? 'Show' : 'Hide'; });
        document.getElementById('toggleDateHistory').addEventListener('click', function() { document.getElementById('dateList').classList.toggle('hidden'); this.textContent = document.getElementById('dateList').classList.contains('hidden') ? 'Show' : 'Hide'; });

        // ==================== INITIALIZE ====================
        updateWatchedList(); updateMovieStats();
        updateEatenList(); updateDinnerStats();
        updateDateList(); updateDateStats();
    </script>
</body>
</html>
